Login-AzureRmAccount
Get-AzureRmSubscription
Get-AzureRmSubscription -SubscriptionId "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxx" -TenantId "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxx" | Set-AzureRmContext

#Informacao do resource group
$rgName = "nameresoursegroup"
$vmName = "namevirtualmachine"

#Parar a VM
Stop-AzureRmVM -ResourceGroupName $rgName -Name $vmName -Force

#Conversao da VM de unmanaged to managed
ConvertTo-AzureRmVMManagedDisk -ResourceGroupName $rgName -VMName $vmName

#Arrancar a maquina
#Start-AzureRmVM -ResourceGroupName $rgName -Name $vmName

#Conversao de HDD para SSD
# Name of the resource group that contains the VM
$rgName = "nameresoursegroup"

# Name of the your virtual machine
$vmName = "namevirtualmachine"

# Choose between StandardLRS and PremiumLRS based on your scenario
$storageType = 'PremiumLRS'

# Premium capable size
# Required only if converting storage from standard to premium
$size = 'Standard_DS3_v2'
$vm = Get-AzureRmVM -Name $vmName -resourceGroupName $rgName

# Stop and deallocate the VM before changing the size
Stop-AzureRmVM -ResourceGroupName $rgName -Name $vmName -Force

# Change the VM size to a size that supports premium storage
# Skip this step if converting storage from premium to standard
$vm.HardwareProfile.VmSize = $size
Update-AzureRmVM -VM $vm -ResourceGroupName $rgName

# Get all disks in the resource group of the VM
$vmDisks = Get-AzureRmDisk -ResourceGroupName $rgName 

# For disks that belong to the selected VM, convert to premium storage
foreach ($disk in $vmDisks)
{
    if ($disk.OwnerId -eq $vm.Id)
    {
        $diskUpdateConfig = New-AzureRmDiskUpdateConfig –AccountType $storageType
        Update-AzureRmDisk -DiskUpdate $diskUpdateConfig -ResourceGroupName $rgName `
        -DiskName $disk.Name
    }
}

Start-AzureRmVM -ResourceGroupName $rgName -Name $vmName